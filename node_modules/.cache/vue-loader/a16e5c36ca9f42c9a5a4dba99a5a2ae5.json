{"remainingRequest":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/employee/Desktop/projects/vuejs-intermediate/src/views/posts/Posts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/employee/Desktop/projects/vuejs-intermediate/src/views/posts/Posts.vue","mtime":1624628773813},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUG9zdHNDb21wb25lbnQnLAogIGRhdGE6ICgpID0+ICh7CiAgICBpbml0UGVyUGFnZTogMTAsCiAgICBwZXJQYWdlOiAxMCwKICAgIG5leHRQYWdlOiAxLAogICAgYXV0aG9yOiB1bmRlZmluZWQsCiAgfSksCiAgcHJvcHM6IFsndXNlcklkJ10sCiAgY29tcG9uZW50czogewogICAgUG9zdENhcmRDb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi9wYXJ0aWFscy9Qb3N0Q2FyZC52dWUnKSwKICAgIFBvc3RzUGxhY2Vob2xkZXJDb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi9wYXJ0aWFscy9Qb3N0c1BsYWNlaG9sZGVyLnZ1ZScpLAogICAgUG9zdHNQYWdpbmF0aW9uQ29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4vcGFydGlhbHMvUG9zdHNQYWdpbmF0aW9uLnZ1ZScpLAogICAgUG9zdHNGaWx0ZXJDb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi9wYXJ0aWFscy9Qb3N0c0ZpbHRlci52dWUnKSwKICB9LAoKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKHsgZ2V0UG9zdHNBY3Rpb246ICdwb3N0cy9nZXRQb3N0cycgfSksCiAgICBzZXRQZXJQYWdlKHZhbCkgeyB0aGlzLnBlclBhZ2UgPSB2YWw7IH0sCiAgICBzZXROZXh0UGFnZShwYWdlKSB7IHRoaXMubmV4dFBhZ2UgPSBwYWdlOyB9LAogICAgc2V0SW5pdFBlclBhZ2UodmFsKSB7IHRoaXMuaW5pdFBlclBhZ2UgPSB2YWw7IH0sCiAgICBzZXRBdXRob3IoYXV0aG9yKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGFyYW1zOiB7IHVzZXJJZDogYXV0aG9yIH0gfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7IGlmIChlcnJvci5uYW1lICE9PSAnTmF2aWdhdGlvbkR1cGxpY2F0ZWQnKSB7IHRocm93IGVycm9yOyB9IH0pOwogICAgfSwKICAgIC8vIERJU1BBVENIIEFDVElPTiBUTyBHRVQgUE9TVFMKICAgIGluaXRpYWxHZXR0aW5nUG9zdHMoKSB7CiAgICAgIC8vIElGIFFVRVJJRVMgQVJFIEVYSVNUIC0+IERJU1BBVENIIEFDVElPTiBUTyBHRVQgUE9TVFMgQlkgUVVFUlkKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmN1cnJlbnRQYWdlIHx8IHRoaXMuJHJvdXRlLnF1ZXJ5LnBlclBhZ2UpIHsKICAgICAgICB0aGlzLmdldFBvc3RzQWN0aW9uKHsKICAgICAgICAgIG5leHRQYWdlOiB0aGlzLiRyb3V0ZS5xdWVyeS5jdXJyZW50UGFnZSA/ICt0aGlzLiRyb3V0ZS5xdWVyeS5jdXJyZW50UGFnZSA6IDEsCiAgICAgICAgICBwZXJQYWdlOiB0aGlzLiRyb3V0ZS5xdWVyeS5wZXJQYWdlID8gK3RoaXMuJHJvdXRlLnF1ZXJ5LnBlclBhZ2UgOiAxMCwKICAgICAgICB9KTsKICAgICAgLy8gRElTUEFUQ0ggQUNUSU9OIFRPIEdFVCBQT1NUUyBXSVRIT1VUIFFVRVJZCiAgICAgIH0gZWxzZSB7IHRoaXMuZ2V0UG9zdHNBY3Rpb24oKTsgfQogICAgfSwKICAgIGluaXRGaWx0ZXJQYXJhbXMoKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5jdXJyZW50UGFnZSkgdGhpcy5zZXROZXh0UGFnZSgrdGhpcy4kcm91dGUucXVlcnkuY3VycmVudFBhZ2UpOwogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkucGVyUGFnZSkgdGhpcy5zZXRQZXJQYWdlKCt0aGlzLiRyb3V0ZS5xdWVyeS5wZXJQYWdlKTsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnBlclBhZ2UpIHRoaXMuc2V0SW5pdFBlclBhZ2UoK3RoaXMuJHJvdXRlLnF1ZXJ5LnBlclBhZ2UpOwogICAgfSwKICAgIHNldFNlYXJjaFN0cmluZygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBwZXJQYWdlOiB0aGlzLnBlclBhZ2UsCiAgICAgICAgICBjdXJyZW50UGFnZTogK3RoaXMubmV4dFBhZ2UsCiAgICAgICAgfSwKICAgICAgICBwYXJhbXM6IHsgdXNlcklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcklkID8gdGhpcy4kcm91dGUucGFyYW1zLnVzZXJJZCA6ICdBbGwnIH0sCiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4geyBpZiAoZXJyb3IubmFtZSAhPT0gJ05hdmlnYXRpb25EdXBsaWNhdGVkJykgeyB0aHJvdyBlcnJvcjsgfSB9KTsKICAgIH0sCgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoewogICAgICBwb3N0c0dldHRlcjogJ3Bvc3RzL2dldFBvc3RzJywKICAgICAgdG90YWxQYWdlczogJ3Bvc3RzL2dldFRvdGFsUGFnZXMnLAogICAgICBhdXRob3JzOiAncG9zdHMvZ2V0QXV0aG9ycycsCiAgICB9KSwKICAgIHBvc3RzKCkgewogICAgICBpZiAodGhpcy51c2VySWQgJiYgdGhpcy51c2VySWQgIT09ICdBbGwnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucG9zdHNHZXR0ZXIoKS5maWx0ZXIoKHBvc3QpID0+IHBvc3QudXNlcklkID09PSArdGhpcy51c2VySWQpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnBvc3RzR2V0dGVyKCk7CiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBwZXJQYWdlKG5ld1ZhbCwgb2xkVmFsKSB7IGNvbnNvbGUubG9nKG5ld1ZhbCwgb2xkVmFsKTsgdGhpcy5zZXRTZWFyY2hTdHJpbmcoKTsgfSwKICAgIG5leHRQYWdlKCkgeyB0aGlzLnNldFNlYXJjaFN0cmluZygpOyB9LAogICAgJHJvdXRlKHsgcXVlcnksIHBhcmFtczogeyB1c2VySWQgfSB9LCB7IHF1ZXJ5OiBvbGRRdWVyeSwgcGFyYW1zOiB7IHVzZXJJZDogb2xkVXNlcklkIH0gfSkgewogICAgICBpZiAodXNlcklkICE9PSBvbGRVc2VySWQgfHwgcXVlcnkgIT09IG9sZFF1ZXJ5KSB7CiAgICAgICAgdGhpcy5nZXRQb3N0c0FjdGlvbih7IG5leHRQYWdlOiB0aGlzLm5leHRQYWdlLCBwZXJQYWdlOiArdGhpcy5wZXJQYWdlIH0pOwogICAgICB9CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRGaWx0ZXJQYXJhbXMoKTsKICAgIHRoaXMuaW5pdGlhbEdldHRpbmdQb3N0cygpOwogIH0sCn07Cg=="},{"version":3,"sources":["Posts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Posts.vue","sourceRoot":"src/views/posts","sourcesContent":["<template>\n    <div >\n      <div class='content px-4 py-4'>\n        <PostsFilterComponent v-on:setAuthor='setAuthor' :authors='authors'/>\n        <div v-if=\"posts\" class='d-flex flex-wrap' >\n            <PostCardComponent\n              v-for=\"post of posts\"\n              :key = post.id\n              :post='post'\n              class='card my-3 mx-5'/>\n        </div>\n        <PostsPlaceholderComponent v-else/>\n      </div>\n      <PostsPaginationComponent\n        v-on:perPage='setPerPage'\n        v-on:nextPage='setNextPage'\n        :page='nextPage'\n        :initPerPage='initPerPage'\n        :total='totalPages' />\n    </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  name: 'PostsComponent',\n  data: () => ({\n    initPerPage: 10,\n    perPage: 10,\n    nextPage: 1,\n    author: undefined,\n  }),\n  props: ['userId'],\n  components: {\n    PostCardComponent: () => import('./partials/PostCard.vue'),\n    PostsPlaceholderComponent: () => import('./partials/PostsPlaceholder.vue'),\n    PostsPaginationComponent: () => import('./partials/PostsPagination.vue'),\n    PostsFilterComponent: () => import('./partials/PostsFilter.vue'),\n  },\n\n  methods: {\n    ...mapActions({ getPostsAction: 'posts/getPosts' }),\n    setPerPage(val) { this.perPage = val; },\n    setNextPage(page) { this.nextPage = page; },\n    setInitPerPage(val) { this.initPerPage = val; },\n    setAuthor(author) {\n      this.$router.push({ params: { userId: author } })\n        .catch((error) => { if (error.name !== 'NavigationDuplicated') { throw error; } });\n    },\n    // DISPATCH ACTION TO GET POSTS\n    initialGettingPosts() {\n      // IF QUERIES ARE EXIST -> DISPATCH ACTION TO GET POSTS BY QUERY\n      if (this.$route.query.currentPage || this.$route.query.perPage) {\n        this.getPostsAction({\n          nextPage: this.$route.query.currentPage ? +this.$route.query.currentPage : 1,\n          perPage: this.$route.query.perPage ? +this.$route.query.perPage : 10,\n        });\n      // DISPATCH ACTION TO GET POSTS WITHOUT QUERY\n      } else { this.getPostsAction(); }\n    },\n    initFilterParams() {\n      if (this.$route.query.currentPage) this.setNextPage(+this.$route.query.currentPage);\n      if (this.$route.query.perPage) this.setPerPage(+this.$route.query.perPage);\n      if (this.$route.query.perPage) this.setInitPerPage(+this.$route.query.perPage);\n    },\n    setSearchString() {\n      this.$router.push({\n        query: {\n          perPage: this.perPage,\n          currentPage: +this.nextPage,\n        },\n        params: { userId: this.$route.params.userId ? this.$route.params.userId : 'All' },\n      }).catch((error) => { if (error.name !== 'NavigationDuplicated') { throw error; } });\n    },\n\n  },\n  computed: {\n    ...mapGetters({\n      postsGetter: 'posts/getPosts',\n      totalPages: 'posts/getTotalPages',\n      authors: 'posts/getAuthors',\n    }),\n    posts() {\n      if (this.userId && this.userId !== 'All') {\n        return this.postsGetter().filter((post) => post.userId === +this.userId);\n      }\n      return this.postsGetter();\n    },\n  },\n\n  watch: {\n    perPage(newVal, oldVal) { console.log(newVal, oldVal); this.setSearchString(); },\n    nextPage() { this.setSearchString(); },\n    $route({ query, params: { userId } }, { query: oldQuery, params: { userId: oldUserId } }) {\n      if (userId !== oldUserId || query !== oldQuery) {\n        this.getPostsAction({ nextPage: this.nextPage, perPage: +this.perPage });\n      }\n    },\n  },\n\n  created() {\n    this.initFilterParams();\n    this.initialGettingPosts();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .content{\n    min-height: 88vh;\n  }\n</style>\n"]}]}