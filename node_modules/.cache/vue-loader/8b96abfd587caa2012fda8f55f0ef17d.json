{"remainingRequest":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/employee/Desktop/projects/vuejs-intermediate/src/views/posts/Posts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/employee/Desktop/projects/vuejs-intermediate/src/views/posts/Posts.vue","mtime":1625069732962},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/employee/Desktop/projects/vuejs-intermediate/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUG9zdHNDb21wb25lbnQnLAogIGRhdGE6ICgpID0+ICh7CiAgICBpbml0UGVyUGFnZTogMTAsCiAgICBwZXJQYWdlOiAxMCwKICAgIG5leHRQYWdlOiB1bmRlZmluZWQsCiAgICBhdXRob3I6IHVuZGVmaW5lZCwKICAgIHRvdGFsUGFnZXM6IDEsCiAgfSksCiAgcHJvcHM6IFsndXNlcklkJ10sCiAgY29tcG9uZW50czogewogICAgUG9zdENhcmRDb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi9wYXJ0aWFscy9Qb3N0Q2FyZC52dWUnKSwKICAgIFBvc3RzUGxhY2Vob2xkZXJDb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi9wYXJ0aWFscy9Qb3N0c1BsYWNlaG9sZGVyLnZ1ZScpLAogICAgUG9zdHNQYWdpbmF0aW9uQ29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4vcGFydGlhbHMvUG9zdHNQYWdpbmF0aW9uLnZ1ZScpLAogICAgUG9zdHNGaWx0ZXJDb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi9wYXJ0aWFscy9Qb3N0c0ZpbHRlci52dWUnKSwKICB9LAoKICBtZXRob2RzOiB7CiAgICBzZXRQZXJQYWdlKHZhbCkgewogICAgICB0aGlzLnBlclBhZ2UgPSArdmFsOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHF1ZXJ5OiB7IC4uLnRoaXMuJHJvdXRlLnF1ZXJ5LCBwZXJQYWdlOiB2YWwgfSB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsgaWYgKGVycm9yLm5hbWUgIT09ICdOYXZpZ2F0aW9uRHVwbGljYXRlZCcpIHsgdGhyb3cgZXJyb3I7IH0gfSk7CiAgICB9LAogICAgc2V0TmV4dFBhZ2UocGFnZSkgewogICAgICB0aGlzLm5leHRQYWdlID0gcGFnZTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBxdWVyeTogeyAuLi50aGlzLiRyb3V0ZS5xdWVyeSwgY3VycmVudFBhZ2U6IHBhZ2UgfSB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsgaWYgKGVycm9yLm5hbWUgIT09ICdOYXZpZ2F0aW9uRHVwbGljYXRlZCcpIHsgdGhyb3cgZXJyb3I7IH0gfSk7CiAgICB9LAogICAgc2V0QXV0aG9yKGF1dGhvcikgewogICAgICBjb25zdCBhdXRob3JJZCA9IHRoaXMuZ2V0QXV0aG9ycy5maW5kKChpdGVtKSA9PiBpdGVtLnVzZXJuYW1lID09PSBhdXRob3IpPy5pZDsKICAgICAgdGhpcy5hdXRob3IgPSBhdXRob3JJZDsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXJhbXM6IHsgdXNlcklkOiBhdXRob3JJZCB9LCBxdWVyeTogdGhpcy4kcm91dGUucXVlcnkgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7IGlmIChlcnJvci5uYW1lICE9PSAnTmF2aWdhdGlvbkR1cGxpY2F0ZWQnKSB7IHRocm93IGVycm9yOyB9IH0pOwogICAgfSwKICAgIGluaXRGaWx0ZXJQYXJhbXMoKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5jdXJyZW50UGFnZSkgdGhpcy5zZXROZXh0UGFnZSgrdGhpcy4kcm91dGUucXVlcnkuY3VycmVudFBhZ2UpOwogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkucGVyUGFnZSkgdGhpcy5zZXRQZXJQYWdlKCt0aGlzLiRyb3V0ZS5xdWVyeS5wZXJQYWdlKTsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnBlclBhZ2UpIHRoaXMuaW5pdFBlclBhZ2UgPSArdGhpcy4kcm91dGUucXVlcnkucGVyUGFnZTsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy51c2VySWQpIHRoaXMuYXV0aG9yID0gK3RoaXMuJHJvdXRlLnBhcmFtcy51c2VySWQ7CiAgICB9LAogICAgc2V0U2VhcmNoU3RyaW5nKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIC4uLnRoaXMuJHJvdXRlLnF1ZXJ5LAogICAgICAgICAgcGVyUGFnZTogK3RoaXMucGVyUGFnZSwKICAgICAgICAgIGN1cnJlbnRQYWdlOiArdGhpcy5uZXh0UGFnZSwKICAgICAgICB9LAogICAgICAgIHBhcmFtczogeyB1c2VySWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy51c2VySWQgPyB0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcklkIDogJ0FsbCcgfSwKICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7IGlmIChlcnJvci5uYW1lICE9PSAnTmF2aWdhdGlvbkR1cGxpY2F0ZWQnKSB7IHRocm93IGVycm9yOyB9IH0pOwogICAgfSwKCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIHBvc3RzR2V0dGVyOiAncG9zdHMvZ2V0UG9zdHMnLAogICAgICBnZXRBdXRob3JzOiAnYXV0aG9ycy9nZXRBdXRob3JzJywKICAgIH0pLAoKICAgIGF1dGhvcnNOYW1lKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRBdXRob3JzLm1hcCgoYXV0aG9yKSA9PiBhdXRob3IudXNlcm5hbWUpOwogICAgfSwKICAgIHBvc3RzKCkgewogICAgICBpZiAodGhpcy51c2VySWQgJiYgdGhpcy51c2VySWQgIT09ICdBbGwnKSB7CiAgICAgICAgY29uc3QgcG9zdHMgPSB0aGlzLnBvc3RzR2V0dGVyKAogICAgICAgICAgewogICAgICAgICAgICB1c2VySWQ6IHRoaXMuYXV0aG9yLAogICAgICAgICAgICBuZXh0UGFnZTogdGhpcy5uZXh0UGFnZSwKICAgICAgICAgICAgcGVyUGFnZTogdGhpcy5wZXJQYWdlLAogICAgICAgICAgfSwKICAgICAgICApOwogICAgICAgIHJldHVybiBwb3N0czsKICAgICAgfQogICAgICBjb25zdCBwb3N0cyA9IHRoaXMucG9zdHNHZXR0ZXIoewogICAgICAgIG5leHRQYWdlOiB0aGlzLm5leHRQYWdlLAogICAgICAgIHBlclBhZ2U6IHRoaXMucGVyUGFnZSwKICAgICAgfSk7CiAgICAgIHJldHVybiBwb3N0czsKICAgIH0sCiAgICBhdXRob3JOYW1lKCkgewogICAgICBjb25zdCBpbml0QXV0aG9yTmFtZSA9IHRoaXMuZ2V0QXV0aG9ycy5maW5kKChpdGVtKSA9PiBpdGVtLmlkID09PSB0aGlzLmF1dGhvcik/LnVzZXJuYW1lOwogICAgICByZXR1cm4gaW5pdEF1dGhvck5hbWU7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHBvc3RzOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGVtZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyKAogICAgICAgIG5ld1ZhbCwKICAgICAgICBvbGRWYWwsCiAgICAgICkgewogICAgICAgIGlmICgobmV3VmFsLm1ldGEudG90YWxQYWdlcyA8IG9sZFZhbC5tZXRhLmN1cnJlbnRQYWdlKQogICAgICAgICAgICAmJiAobmV3VmFsLm1ldGEuY3VycmVudFBhZ2UgPCBvbGRWYWwubWV0YS5jdXJyZW50UGFnZSkKICAgICAgICAgICAgJiYgKG5ld1ZhbC5tZXRhLnBlclBhZ2UgPiBvbGRWYWwubWV0YS5wZXJQYWdlKQogICAgICAgICkgewogICAgICAgICAgY29uc3QgY3VycmVudFBhZ2UgPSBvbGRWYWwubWV0YS5jdXJyZW50UGFnZSA/IG9sZFZhbC5tZXRhLmN1cnJlbnRQYWdlIDogMTsKICAgICAgICAgIHRoaXMubmV4dFBhZ2UgPSBuZXdWYWwubWV0YS5jdXJyZW50UGFnZSA+IDAKICAgICAgICAgICAgPyBuZXdWYWwubWV0YS5jdXJyZW50UGFnZSA6IGN1cnJlbnRQYWdlOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIC4uLnRoaXMuJHJvdXRlLnF1ZXJ5LAogICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBuZXdWYWwubWV0YS5jdXJyZW50UGFnZSA+IDAKICAgICAgICAgICAgICAgID8gbmV3VmFsLm1ldGEuY3VycmVudFBhZ2UgOiBjdXJyZW50UGFnZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsgaWYgKGVycm9yLm5hbWUgIT09ICdOYXZpZ2F0aW9uRHVwbGljYXRlZCcpIHsgdGhyb3cgZXJyb3I7IH0gfSk7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICAgICRyb3V0ZSggbmV3VmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKG5ld1ZhbCkKICAgIH0sCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdEZpbHRlclBhcmFtcygpOwogIH0sCn07Cg=="},{"version":3,"sources":["Posts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Posts.vue","sourceRoot":"src/views/posts","sourcesContent":["<template>\n    <div >\n      <div class='content px-5 py-4 pt-10'>\n        <PostsFilterComponent\n          v-on:setAuthor='setAuthor'\n          :authors='authorsName'\n          :defaultValue='authorName'\n          />\n        <div v-if=\"posts\" class='d-flex flex-wrap' >\n            <PostCardComponent\n              v-for=\"post of posts.posts\"\n              :key = post.id\n              :post='post'\n              class='card my-3 mr-5'/>\n        </div>\n        <PostsPlaceholderComponent v-else/>\n      </div>\n      <PostsPaginationComponent\n        v-on:perPage='setPerPage'\n        v-on:nextPage='setNextPage'\n        :page='nextPage'\n        :initPerPage='initPerPage'\n        :totalPages='posts.meta.totalPages'\n        />\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'PostsComponent',\n  data: () => ({\n    initPerPage: 10,\n    perPage: 10,\n    nextPage: undefined,\n    author: undefined,\n    totalPages: 1,\n  }),\n  props: ['userId'],\n  components: {\n    PostCardComponent: () => import('./partials/PostCard.vue'),\n    PostsPlaceholderComponent: () => import('./partials/PostsPlaceholder.vue'),\n    PostsPaginationComponent: () => import('./partials/PostsPagination.vue'),\n    PostsFilterComponent: () => import('./partials/PostsFilter.vue'),\n  },\n\n  methods: {\n    setPerPage(val) {\n      this.perPage = +val;\n      this.$router.push({ query: { ...this.$route.query, perPage: val } })\n        .catch((error) => { if (error.name !== 'NavigationDuplicated') { throw error; } });\n    },\n    setNextPage(page) {\n      this.nextPage = page;\n      this.$router.push({ query: { ...this.$route.query, currentPage: page } })\n        .catch((error) => { if (error.name !== 'NavigationDuplicated') { throw error; } });\n    },\n    setAuthor(author) {\n      const authorId = this.getAuthors.find((item) => item.username === author)?.id;\n      this.author = authorId;\n      this.$router.push({ params: { userId: authorId }, query: this.$route.query })\n        .catch((error) => { if (error.name !== 'NavigationDuplicated') { throw error; } });\n    },\n    initFilterParams() {\n      if (this.$route.query.currentPage) this.setNextPage(+this.$route.query.currentPage);\n      if (this.$route.query.perPage) this.setPerPage(+this.$route.query.perPage);\n      if (this.$route.query.perPage) this.initPerPage = +this.$route.query.perPage;\n      if (this.$route.params.userId) this.author = +this.$route.params.userId;\n    },\n    setSearchString() {\n      this.$router.push({\n        query: {\n          ...this.$route.query,\n          perPage: +this.perPage,\n          currentPage: +this.nextPage,\n        },\n        params: { userId: this.$route.params.userId ? this.$route.params.userId : 'All' },\n      }).catch((error) => { if (error.name !== 'NavigationDuplicated') { throw error; } });\n    },\n\n  },\n  computed: {\n    ...mapGetters({\n      postsGetter: 'posts/getPosts',\n      getAuthors: 'authors/getAuthors',\n    }),\n\n    authorsName() {\n      return this.getAuthors.map((author) => author.username);\n    },\n    posts() {\n      if (this.userId && this.userId !== 'All') {\n        const posts = this.postsGetter(\n          {\n            userId: this.author,\n            nextPage: this.nextPage,\n            perPage: this.perPage,\n          },\n        );\n        return posts;\n      }\n      const posts = this.postsGetter({\n        nextPage: this.nextPage,\n        perPage: this.perPage,\n      });\n      return posts;\n    },\n    authorName() {\n      const initAuthorName = this.getAuthors.find((item) => item.id === this.author)?.username;\n      return initAuthorName;\n    },\n  },\n  watch: {\n    posts: {\n      deep: true,\n      emediate: true,\n      handler(\n        newVal,\n        oldVal,\n      ) {\n        if ((newVal.meta.totalPages < oldVal.meta.currentPage)\n            && (newVal.meta.currentPage < oldVal.meta.currentPage)\n            && (newVal.meta.perPage > oldVal.meta.perPage)\n        ) {\n          const currentPage = oldVal.meta.currentPage ? oldVal.meta.currentPage : 1;\n          this.nextPage = newVal.meta.currentPage > 0\n            ? newVal.meta.currentPage : currentPage;\n          this.$router.push({\n            query: {\n              ...this.$route.query,\n              currentPage: newVal.meta.currentPage > 0\n                ? newVal.meta.currentPage : currentPage,\n            },\n          })\n            .catch((error) => { if (error.name !== 'NavigationDuplicated') { throw error; } });\n        }\n      },\n    },\n    $route( newVal) {\n      console.log(newVal)\n    },\n  },\n\n  created() {\n    this.initFilterParams();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .content{\n    min-height: 83vh;\n  }\n</style>\n"]}]}